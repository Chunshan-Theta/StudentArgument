<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Material Kit by Creative Tim</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <!--     Fonts and icons     -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/material-kit.css" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="assets/css/demo.css" rel="stylesheet" />
    <style>
    #feedback {
        font-size: 1.4em;
    }

    #selectable .ui-selecting {
        background: #FECA40;
    }

    #selectable .ui-selected {
        background: #F39814;
        color: white;
    }

    #selectable {
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: 60%;
    }

    #selectable li {
        margin: 3px;
        padding: 0.4em;
        font-size: 1.4em;
        height: 38px;
    }
    </style>
</head>

<body class="index-page">
    <!-- Navbar -->
    <nav class="navbar navbar-transparent navbar-fixed-top navbar-color-on-scroll">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-index">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="./login">
                    <div class="logo-container">
                        <div class="logo">
                            <img src="assets/img/logo.png" alt="site Logo" rel="tooltip" title="logo" data-placement="bottom" data-html="true">
                        </div>
                        <div class="brand">
                            Argument Sys
                        </div>
                    </div>
                </a>
            </div>
            <div class="collapse navbar-collapse" id="navigation-index">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="./signup">
						    <i class="material-icons">person_add</i> Sign up
					    </a>
                        <!--https://material.io/icons/-->
                    </li>
                    <li>
                        <a href="./login">
						    <i class="material-icons">chat</i> Enter activity
					    </a>
                    </li>
                    <li>
                        <a rel="tooltip" title="About ours" data-placement="bottom" href="http://ytwu.lst.ncu.edu.tw/wu/ch/" target="_blank" class="btn btn-white btn-simple btn-just-icon">
						    <i class="fa fa-sign-out"></i><!--http://fontawesome.io/icons/-->
					    </a>
                    </li>
                    <li>
                        <a rel="tooltip" title="log-out" data-placement="bottom" href="./user/logout"  class="btn btn-white btn-simple btn-just-icon">
						    <i class="fa fa-question-circle"></i>
					    </a>
                    </li>
                    <li>
                        <a rel="tooltip" title="Setting" data-placement="bottom" href="./sitting_login" class="btn btn-white btn-simple btn-just-icon">
						    <i class="fa fa-cog"></i>
					    </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    <div class="wrapper">
        <div class="header header-filter" style="background-image: url('assets/img/bg2.jpeg');">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <div class="brand">
                            <h1>Argument System.</h1>
                            <h3>argument platflom for student.</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="main main-raised">
            <div class="section section-basic">
                <div class="container">
                    <div class="title">
                        <h2>新增Tester</h2>
                    </div>
                    <!--Input 1 : -->
                    <div class="col-sm-6">
                        <h3>user</h3>
                        <p id="feedback">
                            <span>You've selected:</span>
                            <br> <span id="select-result"></span>
                        </p>
                        <ol id="selectable">
                            <!--
					  <li class="ui-widget-content" name='1'>Item 1</li>
					  <li class="ui-widget-content" name='2'>Item 2</li>
					  <li class="ui-widget-content" name='3'>Item 3</li>
					  <li class="ui-widget-content" name='4'>Item 4</li>
					  <li class="ui-widget-content" name='5'>Item 5</li>
					  <li class="ui-widget-content" name='6'>Item 6</li>
					  -->
                        </ol>
                    </div>
                    <!--/ Input 1 : -->
                    <!--Input 1 : -->
                    <div class="col-sm-6">
                        <h3>Activity</h3>
                        <select name="Activity_ID" id="Activity_ID"></select>
                    </div>
                    <!--/ Input 1 : -->
                    <!-- summit button-->
                    <div class="col-sm-12">
                        <button onclick="newTester();" class="btn btn-primary">確定</button>
                    </div>
                    <!--/ summit button-->
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <nav class="pull-left">
                    <ul>
                        <li>
                            <a href="#">
							Home
						</a>
                        </li>
                        <li>
                            <a href="#">
						   About Us
						</a>
                        </li>
                        <li>
                            <a href="#">
						   Blog
						</a>
                        </li>
                        <li>
                            <a href="#">
							Licenses
						</a>
                        </li>
                    </ul>
                </nav>
                <div class="copyright pull-right">
                    &copy; 2018, made with <i class="fa fa-terminal"></i> Nodejs by Theta for argument system in WuRET.
                </div>
            </div>
        </footer>
    </div>
</body>
<!--   Core JS Files   -->
<script src="assets/js/jquery.min.js" type="text/javascript"></script>
<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
<script src="assets/js/material.min.js"></script>
<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
<script src="assets/js/nouislider.min.js" type="text/javascript"></script>
<!--  Plugin for the Datepicker, full documentation here: http://www.eyecon.ro/bootstrap-datepicker/ -->
<script src="assets/js/bootstrap-datepicker.js" type="text/javascript"></script>
<!-- Control Center for Material Kit: activating the ripples, parallax effects, scripts from the example pages etc -->
<script src="assets/js/material-kit.js" type="text/javascript"></script>
<script type="text/javascript">
$().ready(function() {
    // the body of this function is in assets/material-kit.js
    materialKit.initSliders();
    window_width = $(window).width();

    if (window_width >= 992) {
        big_image = $('.wrapper > .header');

        $(window).on('scroll', materialKitDemo.checkScrollForParallax);
    }

});
</script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
$("#selectable").selectable({
    stop: function() {
        var result = $("#select-result").empty();
        $(".ui-selected", this).each(function() {
            var name = $(this).attr('name');
            result.append("<li> #" + name + '</li>');
        });
    }
});
</script>
<script>
$.get("./user/subuser",
    function(data, status) {
        activity_list = JSON.parse(data);
        console.log(activity_list['text']);



        for (var i = 0; i < activity_list["return"].length; i++) {
            var user_id = activity_list["return"][i]["user_id"];
            var user_name = activity_list["return"][i]["name"];
            var user_school = activity_list["return"][i]["school"];

            var htmltext = '<li class="ui-widget-content" value="' + user_id + '" name="' + user_name + '">' + user_name + ' , ' + user_school + '</li>';
            $('#selectable').append(htmltext);


        }
    }
);
$.get("./activity",
    function(data, status) {
        activity_list = JSON.parse(data);
        console.log(activity_list['text']);
        $('#Activity_ID').append('<optgroup id="y_Activitys" label="your Activity">');



        for (var i = 0; i < activity_list["return"].length; i++) {
            var a_id = activity_list["return"][i]["avtivity_id"];
            var timeofactivity = activity_list["return"][i]["timeofactivity"].substring(0, 100);
            htmltext = '<option value="' + a_id + '">activity:' + a_id + ',' + timeofactivity + '</option>'
            $('#y_Activitys').append(htmltext);
        }
    }
);
</script>
<script type="text/javascript">
function newTester() {
    var activity_id = $('#Activity_ID').val();
    var PostData = '[';
    $(".ui-selected", '#selectable').each(function() {
        var u_id = $(this).attr('value');
        PostData += '["' + activity_id + '","' + u_id + '"],';
    });
    PostData = PostData.substring(0, PostData.length - 1) + ']';
    console.log(PostData);
    $.post("./tester", {
            'JsonData': PostData
        },
        function(data, status) {
            console.log(data);
            alert('done.');
            location.href = './sittingPage';
        }
    );
}
</script>

</html>